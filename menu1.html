<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GROK CHAOS MENU V2</title>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <style>
    /* ALAPOK */
    * { margin:0; padding:0; box-sizing:border-box; cursor:none; }
    body { background:#050505; color:#e0e0e0; font-family:'Courier New', monospace; overflow:hidden; height:100vh; }
    
    /* CUSTOM CURSOR */
    .cursor {
      position:fixed; top:0; left:0; width:12px; height:12px; background:#ff003c; 
      border-radius:50%; pointer-events:none; z-index:99999; mix-blend-mode:difference;
      transform: translate(-50%, -50%);
      transition: width 0.3s, height 0.3s, background 0.3s;
    }
    .cursor.hovered { width:60px; height:60px; background:white; mix-blend-mode:exclusion; }

    /* ZAJSZŰRŐ HÁTTÉR */
    .noise-bg {
      position:fixed; inset:0; pointer-events:none; z-index:999; opacity:0.08;
      background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)"/%3E%3C/svg%3E');
    }

    /* MENÜ GOMB */
    .open-trigger {
      position:fixed; top:40px; right:40px; z-index:100;
      font-size:24px; font-weight:bold; background:none; border:none; color:#fff;
      text-transform:uppercase; letter-spacing:2px; mix-blend-mode:difference;
    }

    /* OVERLAY */
    .menu-overlay {
      position:fixed; inset:0; background:#000; z-index:90;
      display:flex; align-items:center; justify-content:center;
      clip-path: circle(0% at 95% 5%); /* Körös nyitás effekt */
      transition: clip-path 0.8s cubic-bezier(0.77, 0, 0.175, 1);
    }
    .menu-overlay.active { clip-path: circle(150% at 90% 10%); }

    .menu-container { width: 80%; max-width: 1200px; padding-left: 5vw; }

    /* FŐ LINKEK */
    .main-item { margin: 10px 0; position: relative; }
    
    .main-link {
      display:inline-block; font-size:clamp(40px, 8vw, 100px); 
      font-weight:900; text-transform:uppercase; color:transparent; 
      -webkit-text-stroke: 2px #555; text-decoration:none;
      position:relative; line-height:1;
      transition: all 0.3s;
    }

    /* A trükk: betűnkénti animációhoz */
    .char { display:inline-block; opacity:0; transform:translateY(100px) rotate(10deg); }

    .main-link:hover { -webkit-text-stroke: 2px #fff; color:#fff; }
    
    /* GLITCH EFFEKT HOVERRE */
    .main-link:hover .char {
      animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
      color: #ff003c;
      text-shadow: 2px 2px #00f2ff, -2px -2px #ff003c;
    }

    @keyframes glitch-anim {
      0% { transform: translate(0) }
      20% { transform: translate(-2px, 2px) }
      40% { transform: translate(-2px, -2px) }
      60% { transform: translate(2px, 2px) }
      80% { transform: translate(2px, -2px) }
      100% { transform: translate(0) }
    }

    /* ALMENÜK */
    .submenu-wrapper {
      height: 0; overflow: hidden; margin-left: 20px; border-left: 2px solid #333;
    }
    .sub-link {
      display:block; font-size: 24px; color:#888; text-decoration:none; 
      padding: 10px 20px; text-transform:lowercase; font-family: 'Helvetica', sans-serif;
      opacity: 0; transform: translateX(-20px);
    }
    .sub-link:hover { color:#00f2ff; padding-left:30px; }

  </style>
</head>
<body>

<div class="cursor"></div>
<div class="noise-bg"></div>

<button class="open-trigger">/// MENU</button>

<div class="menu-overlay" id="menu">
  <div class="menu-container">

    <div class="main-item">
      <a href="#" class="main-link" data-text="Főoldal">Főoldal</a>
    </div>

    <div class="main-item">
      <a href="#" class="main-link toggle-sub" data-text="Projektek">Projektek +</a>
      <div class="submenu-wrapper">
        <a href="#" class="sub-link">Webdesign</a>
        <a href="#" class="sub-link">Branding</a>
        <a href="#" class="sub-link">Káosz generátor</a>
      </div>
    </div>

    <div class="main-item">
      <a href="#" class="main-link" data-text="Rólam">Rólam</a>
    </div>

    <div class="main-item">
      <a href="#" class="main-link" data-text="Kapcsolat">Kapcsolat</a>
    </div>

  </div>
</div>

<script>
  // 1. "Szegény ember SplitText-je" (ingyenes megoldás)
  document.querySelectorAll('.main-link').forEach(link => {
    const text = link.textContent;
    link.innerHTML = '';
    text.split('').forEach(char => {
      const span = document.createElement('span');
      span.textContent = char === ' ' ? '\u00A0' : char;
      span.classList.add('char');
      link.appendChild(span);
    });
  });

  // Változók
  const overlay = document.querySelector('.menu-overlay');
  const trigger = document.querySelector('.open-trigger');
  const cursor = document.querySelector('.cursor');
  let isOpen = false;

  // 2. Cursor logika
  document.addEventListener('mousemove', e => {
    gsap.to(cursor, {x: e.clientX, y: e.clientY, duration: 0.1, ease:"power2.out"});
  });
  
  document.querySelectorAll('a, button').forEach(el => {
    el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
    el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
  });

  // 3. Menü nyitás animáció
  const openMenu = () => {
    isOpen = true;
    trigger.textContent = "/// CLOSE";
    overlay.classList.add('active');
    
    // Betűk animálása befelé
    gsap.to('.char', {
      y: 0, 
      rotate: 0,
      opacity: 1, 
      stagger: { amount: 0.5, from: "random" }, // Káosz effekt a megjelenésnél
      duration: 1, 
      ease: "power4.out",
      delay: 0.2
    });
  };

  const closeMenu = () => {
    isOpen = false;
    trigger.textContent = "/// MENU";
    overlay.classList.remove('active');
    
    // Betűk eltüntetése
    gsap.to('.char', {
      y: 100, 
      rotate: 10,
      opacity: 0, 
      duration: 0.5,
      ease: "power2.in"
    });
    
    // Almenük bezárása resetelésnél
    gsap.to('.submenu-wrapper', {height:0, duration:0.3});
  };

  trigger.addEventListener('click', () => isOpen ? closeMenu() : openMenu());

  // 4. Almenü logika (Harmonika effekt)
  document.querySelectorAll('.toggle-sub').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      const sub = btn.nextElementSibling;
      const links = sub.querySelectorAll('.sub-link');
      
      if (sub.style.height && sub.style.height !== '0px') {
        // Zárás
        gsap.to(sub, {height: 0, duration: 0.4, ease: "power2.inOut"});
        gsap.to(links, {opacity:0, x:-20});
      } else {
        // Nyitás
        gsap.set(sub, {height: "auto"});
        gsap.from(sub, {height: 0, duration: 0.5, ease: "power2.out"});
        
        // Linkek beúsztatása
        gsap.to(links, {
          opacity: 1, 
          x: 0, 
          stagger: 0.05, 
          duration: 0.4,
          delay: 0.2
        });
      }
    });
  });

</script>
</body>
</html>